// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum UserRole {
  SUPER_ADMIN
  ADMIN
  CREW
  PASSENGER
  FIRST_RESPONDERS
}

model User {
  userId      String   @id @default(auto()) @map("_id") @db.ObjectId
  email       String   @unique
  password    String
  role        UserRole @default(PASSENGER)
  isVerified  Boolean  @default(false)
  isOnboarded Boolean  @default(false)
}

enum OrganizationType {
  SCHOOL
  COLLEGE
  COMPANY
}

model Organization {
  id                  String           @id @default(auto()) @map("_id") @db.ObjectId
  orgName             String           @unique
  orgType             OrganizationType
  fleetsCount         Int
  routesCount         Int
  crewsCount          Int
  passengersCount     Int
  adminName           String
  adminEmail          String
  adminPhoneNumber    String
  altAdminPhoneNumber String
  addressLine1        String
  addressLine2        String?
  addressLine3        String?
  state               String
  city                String
  pincode             Int
}

enum FleetType {
  BUS
  MINI_BUS
  VAN
}

enum FleetStatus {
  ACTIVE
  INACTIVE
  MAINTENANCE
  IDLE
}

model Fleet {
  id          String      @id @default(auto()) @map("_id") @db.ObjectId
  fleetNumber String      @unique
  regNumber   String
  make        String
  model       String
  year        Int
  type        FleetType
  color       String
  status      FleetStatus
  fcExpDate   DateTime
  capacity    Int
  ac          Boolean
}

model Route {
  id             String @id @default(auto()) @map("_id") @db.ObjectId
  routeName    String @unique
  stops          String
  passengerCount Int
  startTime      String
  endTime        String
  startPoint     String
  distance       Int
  duration       Int
  driverId       String
}

model Stop {
  id             String @id @default(auto()) @map("_id") @db.ObjectId
  stopName       String @unique
  lat            Float
  lng            Float
  fleetNumber    String
  routeNumber    String
  pickupTime     String
  dropTime       String
  passengerCount Int
}

model trackinglogs {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  regNumber   String
  gpsDeviceId String
  routeNumber String
  timeStamp   DateTime
  latitude    Float
  longitude   Float
}

